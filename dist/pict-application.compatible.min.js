"use strict";function _callSuper(t,i,e){return i=_getPrototypeOf(i),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(i,e||[],_getPrototypeOf(t).constructor):i.apply(t,e))}function _possibleConstructorReturn(t,i){if(i&&("object"==_typeof(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_setPrototypeOf(t,i)}function _setPrototypeOf(t,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},_setPrototypeOf(t,i)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty(t,i,e){return(i=_toPropertyKey(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,i){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,i||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PictApplication=t()}}((function(){return function t(i,e,o){function n(a,r){if(!e[a]){if(!i[a]){var c="function"==typeof require&&require;if(!r&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=e[a]={exports:{}};i[a][0].call(h.exports,(function(t){return n(i[a][1][t]||t)}),h,h.exports,t,i,e,o)}return e[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(t,i,e){var o=function(){return _createClass((function t(i,e,o){_classCallCheck(this,t),"object"===_typeof(i)&&i.isFable?this.connectFable(i):this.fable=!1,this.fable?(this.UUID=i.getUUID(),this.options="object"===_typeof(e)?e:{}):(this.options="object"!==_typeof(i)||i.isFable?"object"===_typeof(e)?e:{}:i,this.UUID="CORE-SVC-".concat(Math.floor(89999*Math.random()+1e4))),this.serviceType="Unknown-".concat(this.UUID),this.Hash="string"==typeof o?o:this.fable||"string"!=typeof e?"".concat(this.UUID):e}),[{key:"connectFable",value:function(t){if("object"!==_typeof(t)||!t.isFable){var i="Fable Service Provider Base: Cannot connect to Fable, invalid Fable object passed in.  The pFable parameter was a [".concat(_typeof(t),"].}");return console.log(i),new Error(i)}return this.fable||(this.fable=t),this.log||(this.log=this.fable.Logging),this.services||(this.services=this.fable.services),this.servicesMap||(this.servicesMap=this.fable.servicesMap),!0}}])}();_defineProperty(o,"isFableService",!0),i.exports=o,i.exports.CoreServiceProviderBase=o},{}],2:[function(t,i,e){var o=t("fable-serviceproviderbase"),n={Name:"DefaultPictApplication",MainViewportViewIdentifier:"Default-View",MainViewportRenderableHash:!1,MainViewportDestinationAddress:!1,MainViewportDefaultDataAddress:!1,AutoSolveAfterInitialize:!0,AutoRenderMainViewportViewAfterInitialize:!0,AutoRenderViewsAfterInitialize:!1,ConfigurationOnlyViews:[],Manifests:{},IdentifierAddressPrefix:"PICT-"},s=function(t){function i(t,e,o){var s;_classCallCheck(this,i),(s=_callSuper(this,i,[t,Object.assign({},JSON.parse(JSON.stringify(n)),e),o])).serviceType="PictApplication",s.pict=s.fable,s.AppData=s.fable.AppData,s.initializeTimestamp=!1,s.lastSolvedTimestamp=!1,s.lastMarshalFromViewsTimestamp=!1,s.lastMarshalToViewsTimestamp=!1,s.lastAutoRenderTimestamp=!1;var a=Object.keys(s.options.Manifests);if(a.length>0)for(var r=0;r<a.length;r++){var c=a[r];s.fable.instantiateServiceProvider("Manifest",s.options.Manifests[c],c)}return s}return _inherits(i,t),_createClass(i,[{key:"onPreSolve",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onPreSolve:")),!0}},{key:"onPreSolveAsync",value:function(t){return this.onPreSolve(),t()}},{key:"onBeforeSolve",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onBeforeSolve:")),!0}},{key:"onBeforeSolveAsync",value:function(t){return this.onBeforeSolve(),t()}},{key:"onSolve",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onSolve:")),!0}},{key:"onSolveAsync",value:function(t){return this.onSolve(),t()}},{key:"solve",value:function(){this.pict.LogNoisiness>2&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," executing solve() function..."));for(var t=Object.keys(this.pict.providers),i=[],e=0;e<t.length;e++){var o=this.pict.providers[t[e]];o.options.AutoSolveWithApp&&i.push(o)}i.sort((function(t,i){return t.options.AutoSolveOrdinal-i.options.AutoSolveOrdinal}));for(var n=0;n<i.length;n++)i[n].solve(i[n]);this.onBeforeSolve();for(var s=Object.keys(this.pict.views),a=[],r=0;r<s.length;r++){var c=this.pict.views[s[r]];c.options.AutoInitialize&&a.push(c)}a.sort((function(t,i){return t.options.AutoInitializeOrdinal-i.options.AutoInitializeOrdinal}));for(var l=0;l<a.length;l++)a[l].solve();return this.onSolve(),this.onAfterSolve(),this.lastSolvedTimestamp=this.fable.log.getTimeStamp(),!0}},{key:"solveAsync",value:function(t){var i=this,e=this.fable.instantiateServiceProviderWithoutRegistration("Anticipate");e.anticipate(this.onBeforeSolveAsync.bind(this));var o="function"==typeof t&&t;o||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," solveAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),o=function(t){t&&i.log.error("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," solveAsync Auto Callback Error: ").concat(t),t)});for(var n=Object.keys(this.pict.providers),s=[],a=0;a<n.length;a++){var r=this.pict.providers[n[a]];r.options.AutoSolveWithApp&&s.push(r)}s.sort((function(t,i){return t.options.AutoSolveOrdinal-i.options.AutoSolveOrdinal}));for(var c=0;c<s.length;c++)e.anticipate(s[c].solveAsync.bind(s[c]));for(var l=Object.keys(this.pict.views),h=[],p=0;p<l.length;p++){var u=this.pict.views[l[p]];u.options.AutoSolveWithApp&&h.push(u)}h.sort((function(t,i){return t.options.AutoSolveOrdinal-i.options.AutoSolveOrdinal}));for(var f=0;f<h.length;f++)e.anticipate(h[f].solveAsync.bind(h[f]));e.anticipate(this.onSolveAsync.bind(this)),e.anticipate(this.onAfterSolveAsync.bind(this)),e.wait((function(t){return i.pict.LogNoisiness>2&&i.log.trace("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," solveAsync() complete.")),i.lastSolvedTimestamp=i.fable.log.getTimeStamp(),o(t)}))}},{key:"onAfterSolve",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onAfterSolve:")),!0}},{key:"onAfterSolveAsync",value:function(t){return this.onAfterSolve(),t()}},{key:"onBeforeInitialize",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onBeforeInitialize:")),!0}},{key:"onBeforeInitializeAsync",value:function(t){return this.onBeforeInitialize(),t()}},{key:"onInitialize",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onInitialize:")),!0}},{key:"onInitializeAsync",value:function(t){return this.onInitialize(),t()}},{key:"initialize",value:function(){if(this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," initialize:")),this.initializeTimestamp)return this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," initialize called but initialization is already completed.  Aborting.")),!1;if(this.onBeforeInitialize(),"ConfigurationOnlyViews"in this.options)for(var t=0;t<this.options.ConfigurationOnlyViews.length;t++){var i=void 0===this.options.ConfigurationOnlyViews[t].ViewIdentifier?"AutoView-".concat(this.fable.getUUID()):this.options.ConfigurationOnlyViews[t].ViewIdentifier;this.log.info("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," adding configuration only view: ").concat(i)),this.pict.addView(i,this.options.ConfigurationOnlyViews[t])}this.onInitialize();for(var e=Object.keys(this.pict.providers),o=[],n=0;n<e.length;n++){var s=this.pict.providers[e[n]];s.options.AutoInitialize&&o.push(s)}o.sort((function(t,i){return t.options.AutoInitializeOrdinal-i.options.AutoInitializeOrdinal}));for(var a=0;a<o.length;a++)o[a].initialize();for(var r=Object.keys(this.pict.views),c=[],l=0;l<r.length;l++){var h=this.pict.views[r[l]];h.options.AutoInitialize&&c.push(h)}c.sort((function(t,i){return t.options.AutoInitializeOrdinal-i.options.AutoInitializeOrdinal}));for(var p=0;p<c.length;p++)c[p].initialize();return this.onAfterInitialize(),this.options.AutoSolveAfterInitialize&&(this.pict.LogNoisiness>1&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," auto solving after initialization...")),this.solve()),this.options.AutoRenderMainViewportViewAfterInitialize&&(this.pict.LogNoisiness>1&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," auto rendering after initialization...")),this.render()),this.initializeTimestamp=this.fable.log.getTimeStamp(),!0}},{key:"initializeAsync",value:function(t){var i=this;this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," initializeAsync:"));var e="function"==typeof t&&t;if(e||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," initializeAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),e=function(t){t&&i.log.error("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," initializeAsync Auto Callback Error: ").concat(t),t)}),this.initializeTimestamp)return this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," async initialize called but initialization is already completed.  Aborting.")),e();var o=this.fable.instantiateServiceProviderWithoutRegistration("Anticipate");if(this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," beginning initialization...")),"ConfigurationOnlyViews"in this.options)for(var n=0;n<this.options.ConfigurationOnlyViews.length;n++){var s=void 0===this.options.ConfigurationOnlyViews[n].ViewIdentifier?"AutoView-".concat(this.fable.getUUID()):this.options.ConfigurationOnlyViews[n].ViewIdentifier;this.log.info("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," adding configuration only view: ").concat(s)),this.pict.addView(s,this.options.ConfigurationOnlyViews[n])}o.anticipate(this.onBeforeInitializeAsync.bind(this)),o.anticipate(this.onInitializeAsync.bind(this));for(var a=Object.keys(this.pict.providers),r=[],c=0;c<a.length;c++){var l=this.pict.providers[a[c]];l.options.AutoInitialize&&r.push(l)}r.sort((function(t,i){return t.options.AutoInitializeOrdinal-i.options.AutoInitializeOrdinal}));for(var h=0;h<r.length;h++)o.anticipate(r[h].initializeAsync.bind(r[h]));for(var p=Object.keys(this.pict.views),u=[],f=0;f<p.length;f++){var d=this.pict.views[p[f]];d.options.AutoInitialize&&u.push(d)}u.sort((function(t,i){return t.options.AutoInitializeOrdinal-i.options.AutoInitializeOrdinal}));for(var v=0;v<u.length;v++){var y=u[v];o.anticipate(y.initializeAsync.bind(y))}o.anticipate(this.onAfterInitializeAsync.bind(this)),this.options.AutoSolveAfterInitialize&&(this.pict.LogNoisiness>1&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," auto solving (asynchronously) after initialization...")),o.anticipate(this.solveAsync.bind(this))),this.options.AutoRenderMainViewportViewAfterInitialize&&(this.pict.LogNoisiness>1&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," auto rendering (asynchronously) after initialization...")),o.anticipate(this.renderMainViewportAsync.bind(this))),o.wait((function(t){return i.initializeTimestamp=i.fable.log.getTimeStamp(),i.pict.LogNoisiness>2&&i.log.trace("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," initialization complete.")),e()}))}},{key:"onAfterInitialize",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onAfterInitialize:")),!0}},{key:"onAfterInitializeAsync",value:function(t){return this.onAfterInitialize(),t()}},{key:"onBeforeMarshalFromViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onBeforeMarshalFromViews:")),!0}},{key:"onBeforeMarshalFromViewsAsync",value:function(t){return this.onBeforeMarshalFromViews(),t()}},{key:"onMarshalFromViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onMarshalFromViews:")),!0}},{key:"onMarshalFromViewsAsync",value:function(t){return this.onMarshalFromViews(),t()}},{key:"marshalFromViews",value:function(){this.pict.LogNoisiness>2&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," executing marshalFromViews() function...")),this.onBeforeMarshalFromViews();for(var t=Object.keys(this.pict.views),i=[],e=0;e<t.length;e++){var o=this.pict.views[t[e]];i.push(o)}for(var n=0;n<i.length;n++)i[n].marshalFromView();return this.onMarshalFromViews(),this.onAfterMarshalFromViews(),this.lastMarshalFromViewsTimestamp=this.fable.log.getTimeStamp(),!0}},{key:"marshalFromViewsAsync",value:function(t){var i=this,e=this.fable.instantiateServiceProviderWithoutRegistration("Anticipate"),o="function"==typeof t&&t;o||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalFromViewsAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),o=function(t){t&&i.log.error("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," marshalFromViewsAsync Auto Callback Error: ").concat(t),t)}),e.anticipate(this.onBeforeMarshalFromViewsAsync.bind(this));for(var n=Object.keys(this.pict.views),s=[],a=0;a<n.length;a++){var r=this.pict.views[n[a]];s.push(r)}for(var c=0;c<s.length;c++)e.anticipate(s[c].marshalFromViewAsync.bind(s[c]));e.anticipate(this.onMarshalFromViewsAsync.bind(this)),e.anticipate(this.onAfterMarshalFromViewsAsync.bind(this)),e.wait((function(t){return i.pict.LogNoisiness>2&&i.log.trace("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," marshalFromViewsAsync() complete.")),i.lastMarshalFromViewsTimestamp=i.fable.log.getTimeStamp(),o(t)}))}},{key:"onAfterMarshalFromViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onAfterMarshalFromViews:")),!0}},{key:"onAfterMarshalFromViewsAsync",value:function(t){return this.onAfterMarshalFromViews(),t()}},{key:"onBeforeMarshalToViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onBeforeMarshalToViews:")),!0}},{key:"onBeforeMarshalToViewsAsync",value:function(t){return this.onBeforeMarshalToViews(),t()}},{key:"onMarshalToViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onMarshalToViews:")),!0}},{key:"onMarshalToViewsAsync",value:function(t){return this.onMarshalToViews(),t()}},{key:"marshalToViews",value:function(){this.pict.LogNoisiness>2&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," executing marshalToViews() function...")),this.onBeforeMarshalToViews();for(var t=Object.keys(this.pict.views),i=[],e=0;e<t.length;e++){var o=this.pict.views[t[e]];i.push(o)}for(var n=0;n<i.length;n++)i[n].marshalToView();return this.onMarshalToViews(),this.onAfterMarshalToViews(),this.lastMarshalToViewsTimestamp=this.fable.log.getTimeStamp(),!0}},{key:"marshalToViewsAsync",value:function(t){var i=this,e=this.fable.instantiateServiceProviderWithoutRegistration("Anticipate"),o="function"==typeof t&&t;o||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalToViewsAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),o=function(t){t&&i.log.error("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," marshalToViewsAsync Auto Callback Error: ").concat(t),t)}),e.anticipate(this.onBeforeMarshalToViewsAsync.bind(this));for(var n=Object.keys(this.pict.views),s=[],a=0;a<n.length;a++){var r=this.pict.views[n[a]];s.push(r)}for(var c=0;c<s.length;c++)e.anticipate(s[c].marshalToViewAsync.bind(s[c]));e.anticipate(this.onMarshalToViewsAsync.bind(this)),e.anticipate(this.onAfterMarshalToViewsAsync.bind(this)),e.wait((function(t){return i.pict.LogNoisiness>2&&i.log.trace("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," marshalToViewsAsync() complete.")),i.lastMarshalToViewsTimestamp=i.fable.log.getTimeStamp(),o(t)}))}},{key:"onAfterMarshalToViews",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onAfterMarshalToViews:")),!0}},{key:"onAfterMarshalToViewsAsync",value:function(t){return this.onAfterMarshalToViews(),t()}},{key:"onBeforeRender",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onBeforeRender:")),!0}},{key:"onBeforeRenderAsync",value:function(t){return this.onBeforeRender(),t()}},{key:"render",value:function(t,i,e,o){var n="string"!=typeof t?this.options.MainViewportViewIdentifier:t,s="string"!=typeof i?this.options.MainViewportRenderableHash:i,a="string"!=typeof e?this.options.MainViewportDestinationAddress:e,r="string"!=typeof o?this.options.MainViewportDefaultDataAddress:o;this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," VIEW Renderable[").concat(s,"] Destination[").concat(a,"] TemplateDataAddress[").concat(r,"] render:")),this.onBeforeRender();var c="string"==typeof n&&this.servicesMap.PictView[n];return c?(this.onRender(),c.render(s,a,r),this.onAfterRender(),!0):(this.log.error("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," could not render from View ").concat(n," because it is not a valid view.")),!1)}},{key:"onRender",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onRender:")),!0}},{key:"onRenderAsync",value:function(t){return this.onRender(),t()}},{key:"renderAsync",value:function(t,i,e,o,n){var s=this,a="string"!=typeof t?this.options.MainViewportViewIdentifier:t,r="string"!=typeof i?this.options.MainViewportRenderableHash:i,c="string"!=typeof e?this.options.MainViewportDestinationAddress:e,l="string"!=typeof o?this.options.MainViewportDefaultDataAddress:o,h="function"==typeof n?n:"function"==typeof o?o:"function"==typeof e?e:"function"==typeof i?i:"function"==typeof t&&t;h||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),h=function(t){t&&s.log.error("PictApp [".concat(s.UUID,"]::[").concat(s.Hash,"] ").concat(s.options.Name," renderAsync Auto Callback Error: ").concat(t),t)}),this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," VIEW Renderable[").concat(r,"] Destination[").concat(c,"] TemplateDataAddress[").concat(l,"] renderAsync:"));var p=this.fable.newAnticipate();p.anticipate(this.onBeforeRenderAsync.bind(this));var u="string"==typeof a&&this.servicesMap.PictView[a];if(!u){var f="PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," could not asynchronously render from View ").concat(a," because it is not a valid view.");return this.pict.LogNoisiness>3&&this.log.error(f),h(new Error(f))}return p.anticipate(this.onRenderAsync.bind(this)),p.anticipate((function(t){u.renderAsync.call(u,r,c,l,t)})),p.anticipate(this.onAfterRenderAsync.bind(this)),p.wait(h)}},{key:"onAfterRender",value:function(){return this.pict.LogNoisiness>3&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," onAfterRender:")),!0}},{key:"onAfterRenderAsync",value:function(t){return this.onAfterRender(),t()}},{key:"renderMainViewport",value:function(){return this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderMainViewport:")),this.render()}},{key:"renderMainViewportAsync",value:function(t){return this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow APPLICATION [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderMainViewportAsync:")),this.renderAsync(t)}},{key:"renderAutoViews",value:function(){var t=this;this.pict.LogNoisiness>0&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," beginning renderAutoViews..."));var i=Object.keys(this.pict.views);i.sort((function(i,e){return t.pict.views[i].options.AutoRenderOrdinal-t.pict.views[e].options.AutoRenderOrdinal}));for(var e=0;e<i.length;e++){var o=this.pict.views[i[e]];o.options.AutoRender&&o.render()}this.pict.LogNoisiness>0&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderAutoViewsAsync complete."))}},{key:"renderAutoViewsAsync",value:function(t){var i=this,e=this.fable.instantiateServiceProviderWithoutRegistration("Anticipate"),o="function"==typeof t?t:"function"==typeof pTemplateDataAddress?pTemplateDataAddress:"function"==typeof pRenderDestinationAddress?pRenderDestinationAddress:"function"==typeof pRenderableHash?pRenderableHash:"function"==typeof pViewIdentifier&&pViewIdentifier;o||(this.log.warn("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderAutoViewsAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),o=function(t){t&&i.log.error("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," renderAutoViewsAsync Auto Callback Error: ").concat(t),t)}),this.pict.LogNoisiness>0&&this.log.trace("PictApp [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," beginning renderAutoViewsAsync..."));var n=Object.keys(this.pict.views);n.sort((function(t,e){return i.pict.views[t].options.AutoRenderOrdinal-i.pict.views[e].options.AutoRenderOrdinal}));for(var s=0;s<n.length;s++){var a=this.pict.views[n[s]];a.options.AutoRender&&e.anticipate(a.renderAsync.bind(a))}e.wait((function(t){return i.lastAutoRenderTimestamp=i.fable.log.getTimeStamp(),i.pict.LogNoisiness>0&&i.log.trace("PictApp [".concat(i.UUID,"]::[").concat(i.Hash,"] ").concat(i.options.Name," renderAutoViewsAsync complete.")),o(t)}))}},{key:"isPictApplication",get:function(){return!0}}])}(o);i.exports=s},{"fable-serviceproviderbase":1}]},{},[2])(2)}));
//# sourceMappingURL=pict-application.compatible.min.js.map
